
<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style type="text/css">
            html, body{
                height: 100%;
                width: 100%;
                background-color: transparent;
            }
        </style>
    </head>
    <body>
        <p> Converts handsontable matrix to nvd3 chart format.
        </p>
        <script src="/third/underscore.js"></script>
        <script type="text/javascript">
 
			function main(matrix){

                // var titles = matrix.shift().slice(1);
                // var xValues = matrix.map(function(row){ return row.shift();})


                var titles = matrix[0];
                var cols = [];
                // var cols = titles.slice(1).map(function(title){ return {key:title, values:[]}; })
                for (var j = 1; j < titles.length; j++) {
                    if(! titles[j]) continue;
                    var current = {key: titles[j], values:[]}
                    for (var i = 1; i < matrix.length; i++) {
                        if(! matrix[i][0]) continue;
                        current.values.push({x: matrix[i][0], y: matrix[i][j]});
                    };
                    cols.push(current);
                };
				return cols;
			}

        </script>

    </body>
</html>
